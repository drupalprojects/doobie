#!/usr/bin/expect
#exp_internal 1

set pass [lindex $argv 0]
set url [lindex $argv 1]
set project [lindex $argv 2]

if { $url == "" } {
  spawn git push origin master;
} else {
  spawn git clone --recursive --branch master $url $project;
}

expect {
  "assword:" { 
        send "$pass\n" 
        expect {
          "> " { }
          "$ " { }
        }
  }
  "(yes/no)? " { 
        send "yes\n"
        expect {
          "> " { }
          "$ " { }
        }
  }
  default {
        send_user "Login failed\n"
        exit
  }
}

